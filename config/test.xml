<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

	<import resource="scoring.xml" />

	<bean id="ksAdapter"
		class="edu.kit.anthropomatik.isl.newsTeller.knowledgeStore.KnowledgeStoreAdapter">
		<constructor-arg name="getMentionFromEventFileName"
			value="resources/SPARQL/general/getMentionFromEvent.qry" />
		<property name="serverURL" value="http://knowledgestore2.fbk.eu/nwr/wikinews" />
		<property name="timeoutMsec" value="10000" />
	</bean>

	<bean id="finder0"
		class="edu.kit.anthropomatik.isl.newsTeller.retrieval.finding.EventFinder">
		<constructor-arg name="userQueryConfigFileName"	value="config/SPARQL/finding_userQuery_Scope0.txt" />
		<constructor-arg name="userInterestConfigFileName" value="config/SPARQL/finding_userInterest_Scope0.txt" />
		<constructor-arg name="previousEventConfigFileName"	value="config/SPARQL/finding_previousEvent_Scope0.txt" />
		<property name="ksAdapter" ref="ksAdapter" />
	</bean>

	<bean id="finder1"
		class="edu.kit.anthropomatik.isl.newsTeller.retrieval.finding.EventFinder">
		<constructor-arg name="userQueryConfigFileName"	value="config/SPARQL/finding_userQuery_Scope1.txt" />
		<constructor-arg name="userInterestConfigFileName" value="config/SPARQL/finding_userInterest_Scope1.txt" />
		<constructor-arg name="previousEventConfigFileName"	value="config/SPARQL/finding_previousEvent_Scope1.txt" />
		<property name="ksAdapter" ref="ksAdapter" />
	</bean>

	<bean id="usabilityScorer0"
		class="edu.kit.anthropomatik.isl.newsTeller.retrieval.scoring.UsabilityScorer">
		<property name="eventHeuristics">
			<list></list>
		</property>
		<property name="queryHeuristics">
			<list></list>
		</property>
		<property name="interestHeuristics">
			<list></list>
		</property>
		<property name="historyHeuristics">
			<list></list>
		</property>
	</bean>

	<bean id="usabilityScorer2"
		class="edu.kit.anthropomatik.isl.newsTeller.retrieval.scoring.UsabilityScorer">
		<property name="eventHeuristics">
			<list>
				<ref bean="hasTime"/>
				
				<!-- unused beans:
				<ref bean="baseline1.0"/>
				<ref bean="baseline0.5"/>
				<ref bean="baseline0.2"/>
				<ref bean="baseline0.0"/>
				<ref bean="hasActor"/>
				<ref bean="hasPlace"/>
				<ref bean="A0"/>
				<ref bean="A1"/>
				<ref bean="eventLabel"/>
				<ref bean="isSpeechCognitive"/>
				<ref bean="mentions"/>
				<ref bean="areLabelsVerbs"/>
				
				 -->
			</list>
		</property>
		<property name="queryHeuristics">
			<list></list>
		</property>
		<property name="interestHeuristics">
			<list></list>
		</property>
		<property name="historyHeuristics">
			<list></list>
		</property>
	</bean>

	<bean id="usabilityAggregator"
		class="edu.kit.anthropomatik.isl.newsTeller.retrieval.aggregating.SimpleAverageAggregator">
	</bean>

	<bean id="filter0" class="edu.kit.anthropomatik.isl.newsTeller.retrieval.filtering.EventFilter">
		<property name="scoreAggregator" ref="usabilityAggregator" />
		<property name="threshold" value="0.0" />
	</bean>

	<bean id="relevanceScorer0"
		class="edu.kit.anthropomatik.isl.newsTeller.retrieval.scoring.RelevanceScorer">
		<property name="eventHeuristics">
			<list></list>
		</property>
		<property name="queryHeuristics">
			<list></list>
		</property>
		<property name="interestHeuristics">
			<list></list>
		</property>
		<property name="historyHeuristics">
			<list></list>
		</property>
	</bean>

	<bean id="relevanceScorer2"
		class="edu.kit.anthropomatik.isl.newsTeller.retrieval.scoring.RelevanceScorer">
		<property name="eventHeuristics">
			<list>
				<!-- TODO: eventHeuristics beans go here! (Scope 2) -->
			</list>
		</property>
		<property name="queryHeuristics">
			<list></list>
		</property>
		<property name="interestHeuristics">
			<list></list>
		</property>
		<property name="historyHeuristics">
			<list></list>
		</property>
	</bean>

	<bean id="relevanceAggregator"
		class="edu.kit.anthropomatik.isl.newsTeller.retrieval.aggregating.SimpleAverageAggregator">
	</bean>

	<bean id="ranker0" class="edu.kit.anthropomatik.isl.newsTeller.retrieval.ranking.EventRanker">
		<property name="scoreAggregator" ref="relevanceAggregator" />
	</bean>

	<bean id="selector0"
		class="edu.kit.anthropomatik.isl.newsTeller.retrieval.selecting.EventSelector">
	</bean>

	<bean id="retriever0"
		class="edu.kit.anthropomatik.isl.newsTeller.retrieval.EventRetriever">
		<property name="eventFinder" ref="finder0" />
		<property name="usabilityScorer" ref="usabilityScorer0" />
		<property name="eventFilter" ref="filter0" />
		<property name="relevanceScorer" ref="relevanceScorer0"/>
		<property name="eventRanker" ref="ranker0" />
		<property name="eventSelector" ref="selector0" />
	</bean>

	<bean id="retriever1"
		class="edu.kit.anthropomatik.isl.newsTeller.retrieval.EventRetriever">
		<property name="eventFinder" ref="finder1" />
		<property name="usabilityScorer" ref="usabilityScorer0" />
		<property name="eventFilter" ref="filter0" />
		<property name="relevanceScorer" ref="relevanceScorer0"/>
		<property name="eventRanker" ref="ranker0" />
		<property name="eventSelector" ref="selector0" />
	</bean>

	<bean id="retriever2"
		class="edu.kit.anthropomatik.isl.newsTeller.retrieval.EventRetriever">
		<property name="eventFinder" ref="finder1" />
		<property name="usabilityScorer" ref="usabilityScorer2" />
		<property name="eventFilter" ref="filter0" />
		<property name="relevanceScorer" ref="relevanceScorer2"/>
		<property name="eventRanker" ref="ranker0" />
		<property name="eventSelector" ref="selector0" />
	</bean>

	<bean id="generator0"
		class="edu.kit.anthropomatik.isl.newsTeller.generation.DummySummaryCreator">
		<property name="ksAdapter" ref="ksAdapter" />
	</bean>

	<bean id="generator1"
		class="edu.kit.anthropomatik.isl.newsTeller.generation.SentencePicker">
		<property name="ksAdapter" ref="ksAdapter" />
	</bean>

	<bean id="userModel0"
		class="edu.kit.anthropomatik.isl.newsTeller.userModel.DummyUserModel">
	</bean>

	<bean id="newsTeller0"
		class="edu.kit.anthropomatik.isl.newsTeller.newsTeller.NewsTeller">
		<constructor-arg value="./config/logging-test.properties" />
		<property name="userModel" ref="userModel0" />
		<property name="retriever" ref="retriever0" />
		<property name="generator" ref="generator0" />
	</bean>
	
	<bean id="newsTeller1"
		class="edu.kit.anthropomatik.isl.newsTeller.newsTeller.NewsTeller">
		<constructor-arg value="./config/logging-test.properties" />
		<property name="userModel" ref="userModel0" />
		<property name="retriever" ref="retriever1" />
		<property name="generator" ref="generator1" />
	</bean>

	<bean id="newsTeller2"
		class="edu.kit.anthropomatik.isl.newsTeller.newsTeller.NewsTeller">
		<constructor-arg value="./config/logging-test.properties" />
		<property name="userModel" ref="userModel0" />
		<property name="retriever" ref="retriever2" />
		<property name="generator" ref="generator1" />
	</bean>

	<bean id="benchmark"
		class="edu.kit.anthropomatik.isl.newsTeller.retrieval.RetrievalBenchmark">
		<property name="finder" ref="finder1" />
		<property name="scorer" ref="usabilityScorer2" />
		<property name="filter" ref="filter0" />
		<property name="userModel" ref="userModel0" />
		<property name="configFileName" value="resources/benchmark/Scope 0.csv" />
	</bean>

	<bean id="filteringBenchmark" class="edu.kit.anthropomatik.isl.newsTeller.retrieval.filtering.FilteringBenchmark">
		<constructor-arg value="resources/benchmark/Scope 0.csv"/>
		<property name="ksAdapter" ref="ksAdapter" />
		<property name="wordNetFeature">
			<bean id="wordNetFeatureImpl"
				class="edu.kit.anthropomatik.isl.newsTeller.retrieval.scoring.heuristics.WordNetVerbCountDeterminer">
				<constructor-arg name="queryFileName"
					value="resources/SPARQL/usability/areLabelsVerbs.qry" />
				<property name="ksAdapter" ref="ksAdapter" />
			</bean>
		</property>
		<property name="doWordNetAnalysis" value="false" />
		<property name="doFeatureAnalysis" value="true" />
		<property name="doCreateFeatureMap" value="false" />
		<property name="features">
			<list>
				
				<bean id="hasActorFeature" class="edu.kit.anthropomatik.isl.newsTeller.retrieval.filtering.SimpleCountFeature">
					<constructor-arg name="queryFileName" value="resources/SPARQL/usability/hasActor.qry"/>
					<constructor-arg name="probabilityFileName" value=""/>
					<property name= "ksAdapter" ref="ksAdapter"/>
					<property name="name" value="hasActor"/>
					<property name="possibleValues">
						<set>
							<value>0</value>
							<value>1</value>
							<value>2</value>
							<value>3</value>
							<value>4</value>
						</set>
					</property>
					<property name="defaultValue" value="4"/>
				</bean>
				<bean id="hasPlaceFeature" class="edu.kit.anthropomatik.isl.newsTeller.retrieval.filtering.SimpleCountFeature">
					<constructor-arg name="queryFileName" value="resources/SPARQL/usability/hasPlace.qry"/>
					<constructor-arg name="probabilityFileName" value=""/>
					<property name= "ksAdapter" ref="ksAdapter"/>
					<property name="name" value="hasPlace"/>
					<property name="possibleValues">
						<set>
							<value>0</value>
							<value>1</value>
							<value>2</value>
							<value>3</value>
						</set>
					</property>
					<property name="defaultValue" value="3"/>
				</bean>
				<bean id="A0Feature" class="edu.kit.anthropomatik.isl.newsTeller.retrieval.filtering.SimpleCountFeature">
					<constructor-arg name="queryFileName" value="resources/SPARQL/usability/A0.qry"/>
					<constructor-arg name="probabilityFileName" value=""/>
					<property name= "ksAdapter" ref="ksAdapter"/>
					<property name="name" value="A0"/>
					<property name="possibleValues">
						<set>
							<value>0</value>
							<value>1</value>
							<value>2</value>
							<value>3</value>
						</set>
					</property>
					<property name="defaultValue" value="3"/>
				</bean>
				<bean id="A1Feature" class="edu.kit.anthropomatik.isl.newsTeller.retrieval.filtering.SimpleCountFeature">
					<constructor-arg name="queryFileName" value="resources/SPARQL/usability/A1.qry"/>
					<constructor-arg name="probabilityFileName" value=""/>
					<property name= "ksAdapter" ref="ksAdapter"/>
					<property name="name" value="A1"/>
					<property name="possibleValues">
						<set>
							<value>0</value>
							<value>1</value>
							<value>2</value>
							<value>3</value>
						</set>
					</property>
					<property name="defaultValue" value="3"/>
				</bean>
				<bean id="eventLabelFeature" class="edu.kit.anthropomatik.isl.newsTeller.retrieval.filtering.SimpleCountFeature">
					<constructor-arg name="queryFileName" value="resources/SPARQL/usability/eventLabel.qry"/>
					<constructor-arg name="probabilityFileName" value=""/>
					<property name= "ksAdapter" ref="ksAdapter"/>
					<property name="name" value="eventLabel"/>
					<property name="possibleValues">
						<set>
							<value>0</value>
							<value>1</value>
							<value>2</value>
							<value>3</value>
							<value>4</value>
						</set>
					</property>
					<property name="defaultValue" value="4"/>
				</bean>
				<bean id="hasTimeFeature" class="edu.kit.anthropomatik.isl.newsTeller.retrieval.filtering.SimpleCountFeature">
					<constructor-arg name="queryFileName" value="resources/SPARQL/usability/hasTime.qry"/>
					<constructor-arg name="probabilityFileName" value=""/>
					<property name= "ksAdapter" ref="ksAdapter"/>
					<property name="name" value="hasTime"/>
					<property name="possibleValues">
						<set>
							<value>1</value>
							<value>2</value>
							<value>3</value>
						</set>
					</property>
					<property name="defaultValue" value="3"/>
				</bean>
				<bean id="isSpeechCognitiveFeature" class="edu.kit.anthropomatik.isl.newsTeller.retrieval.filtering.SimpleCountFeature">
					<constructor-arg name="queryFileName" value="resources/SPARQL/usability/isSpeechCognitive.qry"/>
					<constructor-arg name="probabilityFileName" value=""/>
					<property name= "ksAdapter" ref="ksAdapter"/>
					<property name="name" value="isSpeechCognitive"/>
					<property name="possibleValues">
						<set>
							<value>0</value>
							<value>1</value>
						</set>
					</property>
					<property name="defaultValue" value="1"/>
				</bean>
				<bean id="numberOfMentionsFeature" class="edu.kit.anthropomatik.isl.newsTeller.retrieval.filtering.SimpleCountFeature">
					<constructor-arg name="queryFileName" value="resources/SPARQL/usability/numberOfMentions.qry"/>
					<constructor-arg name="probabilityFileName" value=""/>
					<property name= "ksAdapter" ref="ksAdapter"/>
					<property name="name" value="numberOfMentions"/>
					<property name="possibleValues">
						<set>
							<value>0</value>
							<value>1</value>
							<value>2</value>
							<value>3</value>
							<value>4</value>
							<value>5</value>
						</set>
					</property>
					<property name="defaultValue" value="5"/>
				</bean>
				<bean id="isStatementFeature" class="edu.kit.anthropomatik.isl.newsTeller.retrieval.filtering.SimpleCountFeature">
					<constructor-arg name="queryFileName" value="resources/SPARQL/usability/isStatement.qry"/>
					<constructor-arg name="probabilityFileName" value=""/>
					<property name= "ksAdapter" ref="ksAdapter"/>
					<property name="name" value="isStatement"/>
					<property name="possibleValues">
						<set>
							<value>0</value>
							<value>1</value>
						</set>
					</property>
					<property name="defaultValue" value="1"/>
				</bean>
				
				<bean id="wordNet" class="edu.kit.anthropomatik.isl.newsTeller.retrieval.filtering.WordNetVerbCountFeature">
					<constructor-arg name="queryFileName" value="resources/SPARQL/usability/areLabelsVerbs.qry"/>
					<constructor-arg name="probabilityFileName" value=""/>
					<property name= "ksAdapter" ref="ksAdapter"/>
					<property name="name" value="areLabelsVerbs"/>
				</bean>	
				
				<!-- 
				
				
				 -->
			</list>
		</property>
	</bean>

</beans>